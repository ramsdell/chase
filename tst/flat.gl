p(f(X)) => q(g(f(X)), w(g(f(X)))).

p(f(X)) & f(X) = Y => q(Y, f(X)).
